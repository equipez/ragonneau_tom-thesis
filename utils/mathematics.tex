%% utils/mathematics.tex
%% Copyright 2021-2022 Tom M. Ragonneau
%
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3
% of this license or (at your option) any later version.
% The latest version of this license is in
%   http://www.latex-project.org/lppl.txt
% and version 1.3 or later is part of all distributions of LaTeX
% version 2005/12/01 or later.
%
% This work has the LPPL maintenance status `maintained'.
%
% The Current Maintainer of this work is Tom M. Ragonneau.
\RequirePackage{amsmath}
\RequirePackage{amsthm}
\RequirePackage{amsfonts}
\RequirePackage{amssymb}
\RequirePackage{mathrsfs}
\RequirePackage{mathtools}
\RequirePackage{dsfont}
\RequirePackage{empheq}
\RequirePackage{bm}
\RequirePackage[breakable,skins,theorems]{tcolorbox}
\RequirePackage{xargs}

% General aspect of the mathematical expressions and environments
\numberwithin{equation}{section}
\renewcommand{\qedsymbol}{\ensuremath{\blacksquare}}

% Mathematical constants, sets, and notations
\newcommand{\eu}{\ensuremath{\mathrm{e}}}
\newcommand{\iu}{\ensuremath{\mathrm{i}}}
\newcommand{\du}{\ensuremath{\mathrm{d}}}
\newcommand{\C}{\ensuremath{\mathds{C}}}
\newcommand{\F}{\ensuremath{\mathds{F}}}
\newcommand{\N}{\ensuremath{\mathds{N}}}
\newcommand{\Q}{\ensuremath{\mathds{Q}}}
\newcommand{\R}{\ensuremath{\mathds{R}}}
\newcommand{\Z}{\ensuremath{\mathds{Z}}}
\newcommand{\T}{\ensuremath{\mathsf{T}}}

% Mathematical operators
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator{\card}{card}
\DeclareMathOperator{\range}{range}
\DeclareMathOperator{\sgn}{sgn}
\newcommand{\eqdef}{\ensuremath{\mathrel{\stackrel{\mathsf{def}}{=}}}}

% Mathematical macros
\newcommand{\abs}[2][]{#1\lvert#2#1\rvert}
\newcommand{\ceil}[2][]{#1\lceil#2#1\rceil}
\newcommand{\floor}[2][]{#1\lfloor#2#1\rfloor}
\newcommand{\norm}[2][]{#1\lVert#2#1\rVert}
\newcommand{\set}[2][]{#1\{#2#1\}}
\newcommand{\inner}[2][]{#1\langle#2#1\rangle}

% Mathematical environments (theorems, proofs, ...)
\theoremstyle{definition}
\newtheorem{assumption}{Assumption}[section]
\newtheorem{condition}{Condition}[section]
\newtheorem{definition}{Definition}[section]
\newtheorem{example}{Example}[section]
\newtheorem{problem}{Problem}[section]
\theoremstyle{plain}
\newtheorem{conjecture}{Conjecture}[section]
\newtheorem{proposition}{Proposition}[section]
\newtheorem{theorem}{Theorem}[section]
\newtheorem{corollary}{Corollary}[theorem]
\newtheorem{lemma}[theorem]{Lemma}
\theoremstyle{remark}
\newtheorem*{annotation}{Annotation}
\newtheorem*{claim}{Claim}
\newtheorem*{note}{Note}
\newtheorem*{remark}{Remark}

% Display mathematical environments in boxes
\tcbset{%
    after skip=\baselineskip,%
    before skip=\baselineskip,%
    boxrule=0pt,%
    breakable,%
    colback=gray!15,%
    enhanced jigsaw,%
    frame hidden,%
    shield externalize,%
}
\tcolorboxenvironment{assumption}{borderline west={4pt}{0pt}{black!30}}
\tcolorboxenvironment{condition}{borderline west={4pt}{0pt}{black!30}}
\tcolorboxenvironment{definition}{borderline west={4pt}{0pt}{OliveGreen!50}}
\tcolorboxenvironment{example}{borderline west={4pt}{0pt}{black!30}}
\tcolorboxenvironment{problem}{borderline west={4pt}{0pt}{black!30}}
\tcolorboxenvironment{conjecture}{borderline west={4pt}{0pt}{black!30}}
\tcolorboxenvironment{proposition}{borderline west={4pt}{0pt}{black!30}}
\tcolorboxenvironment{theorem}{borderline west={4pt}{0pt}{BlueViolet!50}}
\tcolorboxenvironment{corollary}{borderline west={4pt}{0pt}{black!30}}
\tcolorboxenvironment{lemma}{borderline west={4pt}{0pt}{black!30}}
\tcolorboxenvironment{annotation}{borderline west={4pt}{0pt}{black!30}}
\tcolorboxenvironment{claim}{borderline west={4pt}{0pt}{black!30}}
\tcolorboxenvironment{note}{borderline west={4pt}{0pt}{black!30}}
\tcolorboxenvironment{remark}{borderline west={4pt}{0pt}{black!30}}

% Fine-tuning spacing in formulas
% Make @ behave as per catcode 13 (active). The TeXbook, p. 155.
\mathcode`@="8000{\catcode`\@=\active\gdef@{\mkern1mu}}

% Dedicated mathematical macros
\newcommand{\con}[1]{c_{#1}}
\newcommand{\lag}{\mathcal{L}}
\newcommand{\obj}{f}

\newcommand{\xl}{l}
\newcommand{\xu}{u}
\newcommand{\ieq}{\mathcal{E}}
\newcommand{\iub}{\mathcal{I}}
